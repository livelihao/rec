{"version":3,"file":"index.cjs.js","sources":["../src/utils.ts","../src/types.ts","../src/store.ts","../src/documents/ProxyTextDocument.ts","../src/documents/VueTextDocument.ts"],"sourcesContent":["import { SFCBlock } from '@vuedx/compiler-sfc'\nimport Path from 'path'\nimport { URI, uriToFsPath } from 'vscode-uri'\nimport { Selector } from './types'\n\nexport function getLanguageIdFromExtension(ext: string): string {\n  switch (ext) {\n    case 'js':\n      return 'javascript'\n    case 'ts':\n      return 'typescript'\n  }\n\n  return ext\n}\n\n// Vue File: foo.vue\nexport const VIRTUAL_FILENAME_SEPARATOR = '________'\n\nexport function basename(fileName: string): string {\n  return Path.posix.basename(fileName)\n}\n\nexport function relativeVirtualImportPath(fileName: string): string {\n  return `./${basename(fileName).replace(/\\.[^.]+$/, '')}`\n}\n\nexport function isVueFile(fileName: string): boolean {\n  return fileName.endsWith('.vue')\n}\n\nexport function isVirtualFile(fileName: string): boolean {\n  return fileName.indexOf('.vue' + VIRTUAL_FILENAME_SEPARATOR) > 0\n}\n\nexport function isVirtualFileOfType(\n  fileName: string,\n  type: '_render' | '_module' | '_internal' | 'script' | 'scriptSetup',\n): boolean {\n  return fileName.indexOf('.vue' + VIRTUAL_FILENAME_SEPARATOR + type) > 0\n}\n\nexport function getContainingFile(fileName: string): string {\n  return fileName.split(VIRTUAL_FILENAME_SEPARATOR).shift() ?? fileName\n}\n\nexport function asUri(fileNameOrUri: string): string {\n  if (isUri(fileNameOrUri)) return fileNameOrUri\n\n  const uri = asFsUri(fileNameOrUri)\n  if (isVirtualFile(fileNameOrUri)) {\n    return uri.replace(/^file:/, 'vue:')\n  }\n\n  return uri\n}\n\nfunction isUri(fileNameOrUri: string): boolean {\n  return /^[a-z]{2,}:\\//i.test(fileNameOrUri)\n}\n\nfunction encodeURIComponentMinimal(path: string): string {\n  let res: string | undefined = undefined;\n  for (let pos = 0; pos < path.length; pos++) {\n    const code = path.charCodeAt(pos);\n    if (code === 35 || code === 63) {\n      if (res === undefined) {\n        res = path.substr(0, pos);\n      }\n      res += code === 35 ? '%23' : '%3F';\n    } else {\n      if (res !== undefined) {\n        res += path[pos];\n      }\n    }\n  }\n  return res !== undefined ? res : path;\n}\nexport function asFsUri(fileName: string): string {\n  return `file://${fileName.startsWith('/') ? '' : '/'}${encodeURIComponentMinimal(replaceSlashes(fileName))}`\n}\n\nexport function replaceSlashes(fileName: string): string {\n  if (fileName.includes('\\\\')) return fileName.replace(/\\\\/g, '/')\n  return fileName\n}\n\nexport function asFsPath(uri: string): string {\n  if (isUri(uri)) {\n    return replaceSlashes(uriToFsPath(URI.parse(uri), true))\n  }\n\n  return replaceSlashes(uri)\n}\n\nexport function parseVirtualFileName(\n  fileName: string,\n): { uri: string; selector: Selector } | null {\n  const uri = URI.parse(asUri(fileName))\n\n  if (uri.scheme === 'vue') {\n    let [container, selector] = asFsPath(fileName).split(VIRTUAL_FILENAME_SEPARATOR)\n    if (!selector.includes('.')) {\n      selector += '.' // Append a dot when extension is missing.\n    }\n    const [block, index] = selector\n      .substr(0, selector.lastIndexOf('.'))\n      .split('__')\n\n    return {\n      uri: asFsUri(container),\n      selector: (index != null\n        ? { type: block, index: parseInt(index, 10) }\n        : { type: block }) as Selector,\n    }\n  }\n\n  return null\n}\n\nconst languages: Record<string, string> = {\n  scriptSetup: 'javascript',\n  script: 'javascript',\n  template: 'vue-html',\n  style: 'css',\n  preview: 'vue-html',\n  docs: 'markdown',\n}\n\nexport function getBlockLanguage(block?: SFCBlock | null): string {\n  if (block == null) return ''\n\n  if (block.lang != null) {\n    if (block.lang === 'js') return 'javascript'\n    if (block.lang === 'ts') return 'typescript'\n    return block.lang\n  }\n\n  return languages[block.type] ?? block.type\n}\n\nexport function isOffsetInBlock(\n  offset: number,\n  block?: SFCBlock | null,\n): boolean {\n  if (block == null) return false\n\n  return block.loc.start.offset <= offset && offset <= block.loc.end.offset\n}\n\nconst extensions: Record<string, string> = {\n  javascript: 'js',\n  javascriptreact: 'jsx',\n  typescript: 'ts',\n  typescriptreact: 'tsx',\n  markdown: 'md',\n}\nexport function getLanguageExtension(lang: string): string {\n  return extensions[lang] ?? lang\n}\n\nexport function binarySearch<T>(\n  array: T[],\n  isMatch: (a: T) => number,\n  returnMin?: boolean,\n): T | undefined {\n  let lo = 0\n  let hi = array.length - 1\n\n  while (lo <= hi) {\n    const mid = ~~(lo + (hi - lo) / 2)\n    const result = isMatch(array[mid])\n\n    if (result === 0) {\n      return array[mid]\n    }\n    if (result < 0) lo = mid + 1\n    else hi = mid - 1\n  }\n\n  if (returnMin === true) {\n    return array[lo]\n  }\n}\n","export const TEMPLATE_BLOCK_SELECTOR = 'template'\nexport const SCRIPT_BLOCK_SELECTOR = 'script'\nexport const SCRIPT_SETUP_BLOCK_SELECTOR = 'scriptSetup'\nexport const RENDER_SELECTOR = '_render'\nexport const MODULE_SELECTOR = '_module'\nexport const INTERNAL_MODULE_SELECTOR = '_internal'\nexport const TEMPLATE_AST_SELECTOR = '_ast'\n\nexport type BlockSelector =\n  | { type: typeof SCRIPT_BLOCK_SELECTOR }\n  | { type: typeof SCRIPT_SETUP_BLOCK_SELECTOR }\n  | { type: typeof TEMPLATE_BLOCK_SELECTOR }\n  | { type: 'style'; index: number }\n  | { type: 'customBlocks'; index: number }\n\nexport type Selector =\n  | BlockSelector\n  | { type: typeof RENDER_SELECTOR }\n  | { type: typeof MODULE_SELECTOR }\n  | { type: typeof INTERNAL_MODULE_SELECTOR }\n  | { type: typeof TEMPLATE_AST_SELECTOR }\n\nexport type SelectorLike =\n  | Selector\n  | typeof TEMPLATE_BLOCK_SELECTOR\n  | typeof SCRIPT_BLOCK_SELECTOR\n  | typeof SCRIPT_SETUP_BLOCK_SELECTOR\n  | typeof RENDER_SELECTOR\n  | typeof MODULE_SELECTOR\n  | typeof TEMPLATE_AST_SELECTOR\n  | typeof INTERNAL_MODULE_SELECTOR\n","export class DocumentStore<T> {\n  protected map = new Map<string, T>()\n  protected reverseUriMap = new Map<string, string>()\n\n  constructor(\n    protected resolve: (uri: string) => T | null,\n    public normalize = (uri: string) => uri,\n  ) {}\n\n  protected getNormalizedUri(uri: string): string {\n    return this.reverseUriMap.get(this.normalize(uri)) ?? uri\n  }\n\n  has(uri: string): boolean {\n    return this.map.has(this.getNormalizedUri(uri))\n  }\n\n  get(uri: string): T | null {\n    return this.map.get(this.getNormalizedUri(uri)) ?? this.loadSync(uri)\n  }\n\n  set(uri: string, document: T): void {\n    this.map.set(uri, document)\n    this.reverseUriMap.set(uri.toLowerCase(), uri)\n  }\n\n  delete(uri: string): boolean {\n    return this.map.delete(this.getNormalizedUri(uri))\n  }\n\n  all(): string[] {\n    return Array.from(this.map.keys())\n  }\n\n  dispose(): void {\n    this.map.clear()\n  }\n\n  private loadSync(uri: string): T | null {\n    const document = this.resolve(uri)\n    if (document != null) {\n      this.set(uri, document)\n    }\n    return document\n  }\n}\n\nexport class AsyncDocumentStore<T> extends DocumentStore<T> {\n  constructor(\n    resolve: (uri: string) => T | Promise<T | null> | null,\n    normalize = (uri: string) => uri,\n  ) {\n    super(resolve as any, normalize)\n  }\n\n  get(uri: string): T | null\n  get(uri: string): Promise<T | null>\n  get(uri: string): any {\n    return this.map.get(this.getNormalizedUri(uri)) ?? this.load(uri)\n  }\n\n  private async load(uri: string): Promise<T | null> {\n    const document = await this.resolve(uri)\n    if (document != null) {\n      this.map.set(this.getNormalizedUri(uri), document)\n    }\n    return document\n  }\n}\n","import {\n  TextDocument,\n  Position,\n  Range,\n} from 'vscode-languageserver-textdocument'\nimport { asFsPath } from '../utils'\nimport { isNumber } from '@vuedx/shared'\n\nexport abstract class ProxyTextDocument implements TextDocument {\n  public readonly fsPath: string\n\n  public constructor(protected doc: TextDocument) {\n    this.fsPath = asFsPath(this.doc.uri)\n  }\n\n  public get version(): number {\n    this.refresh()\n\n    return this.doc.version\n  }\n\n  public get languageId(): string {\n    return this.doc.languageId\n  }\n\n  public get lineCount(): number {\n    this.refresh()\n\n    return this.doc.lineCount\n  }\n\n  public get uri(): string {\n    return this.doc.uri\n  }\n\n  public getText(): string\n  public getText(range: Range): string\n  public getText(offset: number, length: number): string\n  public getText(range?: number | Range, length?: number): string {\n    this.refresh()\n\n    if (isNumber(range)) {\n      return this.doc.getText().substr(range, length)\n    } else {\n      return this.doc.getText(range)\n    }\n  }\n\n  public positionAt(offset: number): Position {\n    this.refresh()\n\n    return this.doc.positionAt(offset)\n  }\n\n  public offsetAt(position: Position): number {\n    this.refresh()\n\n    return this.doc.offsetAt(position)\n  }\n\n  protected refresh(): void {}\n}\n","import {\n  ComponentRegistrationInfo,\n  ComponentsOptionAnalyzer,\n  createAnalyzer,\n  ScriptBlockAnalyzer,\n} from '@vuedx/analyze'\nimport {\n  parse,\n  SFCBlock,\n  SFCDescriptor,\n  SFCParseOptions,\n  SFCStyleBlock,\n} from '@vuedx/compiler-sfc'\nimport { CodegenResult, compile, ComponentImport } from '@vuedx/compiler-tsx'\nimport { getComponentName, isNotNull, isNumber, isString } from '@vuedx/shared'\nimport Path from 'path'\nimport {\n  Position as SourceMapPosition,\n  RawSourceMap,\n  SourceMapConsumer,\n} from 'source-map'\nimport {\n  Position,\n  TextDocument,\n  TextDocumentContentChangeEvent,\n} from 'vscode-languageserver-textdocument'\nimport {\n  BlockSelector,\n  INTERNAL_MODULE_SELECTOR,\n  MODULE_SELECTOR,\n  RENDER_SELECTOR,\n  SCRIPT_BLOCK_SELECTOR,\n  SCRIPT_SETUP_BLOCK_SELECTOR,\n  Selector,\n  SelectorLike,\n  TEMPLATE_AST_SELECTOR,\n  TEMPLATE_BLOCK_SELECTOR,\n} from '../types'\nimport {\n  asUri,\n  binarySearch,\n  getBlockLanguage,\n  getLanguageExtension,\n  isOffsetInBlock,\n  parseVirtualFileName,\n  relativeVirtualImportPath,\n  VIRTUAL_FILENAME_SEPARATOR,\n} from '../utils'\nimport { ProxyTextDocument } from './ProxyTextDocument'\n\nconst analyzer = createAnalyzer([ScriptBlockAnalyzer, ComponentsOptionAnalyzer])\nconst replaceRE = /./g\nconst parseSFC: typeof parse = /* #__PURE__ */ (source, options) => {\n  const result = parse(source, options)\n\n  // @vue/compiler-sfc does not pads template.\n  if (result.descriptor.template?.content != null) {\n    const { template } = result.descriptor\n    // @ts-expect-error - parse reuses\n    if (template.__padded__ !== true) {\n      // @ts-expect-error\n      template.__padded__ = true\n      template.content =\n        source.substr(0, template.loc.start.offset).replace(replaceRE, ' ') +\n        template.content\n    }\n  }\n\n  return result\n}\n\ninterface CreateVirtualTextDocumentOptions<T extends Selector = Selector> {\n  container: VueTextDocument\n  selector: T\n  uri: string\n  languageId: string\n  version: number\n  content: string\n}\ninterface BlockTransformResult {\n  code: string\n  map?: RawSourceMap\n}\ninterface CreateTransformedBlockTextDocumentOptions<\n  T extends Selector = Selector\n> extends CreateVirtualTextDocumentOptions<T> {\n  sourceSelector?: Selector\n  transformer(document: TransformedBlockTextDocument): BlockTransformResult\n}\n\nexport class VirtualTextDocument extends ProxyTextDocument {\n  public readonly container: VueTextDocument\n  public readonly selector: Selector\n  protected isDirty = true\n\n  public markDirty(): void {\n    this.isDirty = true\n  }\n\n  protected constructor(\n    container: VueTextDocument,\n    selector: Selector,\n    doc: TextDocument,\n  ) {\n    super(doc)\n\n    this.container = container\n    this.selector = selector\n  }\n\n  protected refresh(): void {\n    if (this.isDirty || this.doc.version !== this.container.version) {\n      this.isDirty = false\n\n      const block = this.container.getBlock(this.selector as BlockSelector)\n      this.doc = TextDocument.update(\n        this.doc,\n        [{ text: block != null ? block.content : '' }],\n        this.container.version,\n      )\n    }\n  }\n\n  public static create(\n    options: CreateVirtualTextDocumentOptions,\n  ): VirtualTextDocument {\n    return new VirtualTextDocument(\n      options.container,\n      options.selector,\n      TextDocument.create(\n        options.uri,\n        options.languageId,\n        options.version,\n        options.content,\n      ),\n    )\n  }\n}\n\nexport class TransformedBlockTextDocument extends VirtualTextDocument {\n  private consumer: SourceMapConsumer | null = null\n\n  protected constructor(\n    container: VueTextDocument,\n    selector: Selector,\n    transformed: TextDocument,\n    private source: TextDocument | VirtualTextDocument,\n    private readonly _transform: (\n      document: TransformedBlockTextDocument,\n    ) => BlockTransformResult,\n  ) {\n    super(container, selector, transformed)\n  }\n\n  private toTextDocumentPosition({\n    line,\n    column,\n  }: SourceMapPosition): Position {\n    return { line: line - 1, character: column }\n  }\n\n  private toSourceMapPosition({\n    line,\n    character,\n  }: Position): SourceMapPosition {\n    return { line: line + 1, column: character }\n  }\n\n  tryGetSourceOffset(offset: number): number | undefined {\n    if (this.consumer != null) {\n      const position = this.consumer.originalPositionFor({\n        ...this.toSourceMapPosition(this.doc.positionAt(offset)),\n        bias: SourceMapConsumer.GREATEST_LOWER_BOUND,\n      })\n\n      if (position?.line != null) {\n        const generated = this.consumer.generatedPositionFor({\n          ...position,\n          bias: SourceMapConsumer.GREATEST_LOWER_BOUND,\n        })\n        const delta =\n          offset - this.offsetAt(this.toTextDocumentPosition(generated))\n        return (\n          this.source.offsetAt(this.toTextDocumentPosition(position)) + delta\n        )\n      }\n    }\n  }\n\n  tryGetGeneratedOffset(offset: number): number | undefined {\n    if (this.consumer != null) {\n      const generated = this.consumer.generatedPositionFor({\n        ...this.toSourceMapPosition(this.source.positionAt(offset)),\n        source: this.container.fsPath,\n        bias: SourceMapConsumer.GREATEST_LOWER_BOUND,\n      })\n\n      if (generated.line != null) {\n        const original = this.consumer.originalPositionFor({\n          ...generated,\n          bias: SourceMapConsumer.GREATEST_LOWER_BOUND,\n        })\n        const delta =\n          offset - this.source.offsetAt(this.toTextDocumentPosition(original))\n        return this.doc.offsetAt(this.toTextDocumentPosition(generated)) + delta\n      }\n    }\n  }\n\n  protected refresh(): void {\n    if (this.isDirty || this.doc.version !== this.container.version) {\n      const { code, map } = this.transform()\n      if (map != null) {\n        if (!(this.source instanceof VirtualTextDocument)) {\n          const block = this.container.getBlock(this.selector as BlockSelector)\n          this.source = TextDocument.update(\n            this.source,\n            [{ text: block != null ? block.content : '' }],\n            this.container.version,\n          )\n        }\n        map.sources = [this.container.fsPath]\n        this.consumer = new SourceMapConsumer(map)\n      }\n\n      this.doc = TextDocument.update(\n        this.doc,\n        [{ text: code }],\n        this.container.version,\n      )\n      this.isDirty = false\n    }\n  }\n\n  public transform(): BlockTransformResult {\n    return this._transform(this)\n  }\n\n  public static create(\n    options: CreateTransformedBlockTextDocumentOptions,\n  ): TransformedBlockTextDocument {\n    const source =\n      options.sourceSelector != null\n        ? options.container.getDocument(options.sourceSelector)\n        : TextDocument.create(\n            options.uri,\n            options.languageId,\n            -1,\n            options.content,\n          )\n\n    return new TransformedBlockTextDocument(\n      options.container,\n      options.selector,\n      TextDocument.create(options.uri, options.languageId, -1, options.content),\n      source,\n      options.transformer,\n    )\n  }\n}\n\nfunction createVueModuleTextDocument(\n  options: CreateVirtualTextDocumentOptions<{ type: typeof MODULE_SELECTOR }>,\n): TransformedBlockTextDocument {\n  return TransformedBlockTextDocument.create({\n    ...options,\n    transformer: (document) => {\n      const { script, scriptSetup, template } = document.container.descriptor\n      const api = document.container.options.vueVersion.startsWith('2.')\n        ? '@@vuedx/vue-2-support'\n        : 'vue'\n\n      const lines: string[] = []\n      let scriptHasDefaultExport = false\n      let scriptMayHaveDefaultExport = false\n      let scriptSetupHasDefaultExport = false\n      let usesDefineComponent = false\n      let usePropTypes = false\n      const name = getComponentName(document.container.fsPath)\n      if (script != null) {\n        const path =\n          script.src != null\n            ? script.src.replace(/\\.([^.]+)$/, '')\n            : relativeVirtualImportPath(\n                document.container.getDocumentFileName('script'),\n              )\n        lines.push(`export * from '${path}'`)\n        lines.unshift(`import script from '${path}'`)\n        scriptHasDefaultExport = script.content.includes('export default ')\n        usesDefineComponent =\n          script.content.includes(' defineComponent(') ||\n          script.content.includes(' defineComponent<')\n        scriptMayHaveDefaultExport = script.src != null\n      }\n\n      if (scriptSetup != null) {\n        const path = relativeVirtualImportPath(\n          document.container.getDocumentFileName('scriptSetup'),\n        )\n        lines.unshift(`import * as scriptSetup from '${path}'`)\n        scriptSetupHasDefaultExport = scriptSetup.content.includes(\n          'export default ',\n        )\n        usesDefineComponent =\n          scriptSetup.content.includes(' defineComponent(') ||\n          scriptSetup.content.includes(' defineComponent<')\n        usePropTypes = scriptSetup.content.includes('declare const props:')\n      }\n\n      if (!usesDefineComponent) {\n        lines.unshift(`import { defineComponent } from '${api}'`)\n      }\n      if (scriptSetupHasDefaultExport) {\n        lines.push(\n          `const ${name} = ${\n            usesDefineComponent\n              ? 'scriptSetup.default'\n              : 'defineComponent(scriptSetup.default)'\n          }`,\n        )\n      } else if (scriptHasDefaultExport || scriptMayHaveDefaultExport) {\n        lines.push(\n          `const ${name} = ${\n            usesDefineComponent ? 'script' : 'defineComponent(script)'\n          }`,\n        )\n      } else {\n        lines.push(\n          `const ${name} = defineComponent${\n            usePropTypes ? '<scriptSetup.$Props>' : ''\n          }({})`,\n        )\n      }\n\n      const renderFilePath = relativeVirtualImportPath(\n        document.container.getDocumentFileName('_render'),\n      )\n      if (template != null) {\n        lines.unshift(`import { render } from '${renderFilePath}'`)\n        lines.push(`${name}.render = render`)\n      } else {\n        lines.unshift(`import \"${renderFilePath}\"`)\n      }\n\n      lines.push(`export default ${name}`)\n\n      return { code: lines.join('\\n') }\n    },\n  })\n}\n\nfunction createInternalModuleTextDocument(\n  options: CreateVirtualTextDocumentOptions<{\n    type: typeof INTERNAL_MODULE_SELECTOR\n  }>,\n): TransformedBlockTextDocument {\n  return TransformedBlockTextDocument.create({\n    ...options,\n    transformer: (document) => {\n      const script = document.container.descriptor.script\n      const scriptSetup = document.container.descriptor.scriptSetup\n      const api = document.container.options.vueVersion.startsWith('2.')\n        ? '@@vuedx/vue-2-support'\n        : 'vue'\n      const lines: string[] = []\n      lines.push(`import { defineComponent } from '${api}'`)\n      if (scriptSetup != null) {\n        const path = relativeVirtualImportPath(\n          document.container.getDocumentFileName('scriptSetup'),\n        )\n\n        lines.push(`import * as scriptSetup from '${path}'`)\n\n        const hasDefaultExport = scriptSetup.content.includes('export default')\n\n        if (hasDefaultExport) {\n          lines.push(`import options from '${path}'`)\n        }\n\n        if (scriptSetup.content.includes('declare const props:')) {\n          lines.push(`import type { $Props } from '${path}'`)\n          lines.push(\n            `const component = defineComponent<$Props>(${\n              hasDefaultExport\n                ? '{ ...options, setup: () => scriptSetup }'\n                : '{ setup: () => scriptSetup }'\n            })`,\n          )\n        } else {\n          lines.push(\n            `const component = defineComponent({ ${\n              hasDefaultExport ? '...options,' : ''\n            } setup: () => scriptSetup })`,\n          )\n        }\n      } else if (script != null) {\n        const path = relativeVirtualImportPath(\n          document.container.getDocumentFileName('script'),\n        )\n        const hasDefineComponent = script.content.includes(` defineComponent(`)\n        lines.push(`import script from '${path}'`)\n        if (hasDefineComponent) {\n          lines.push(`const component = script`)\n        } else {\n          lines.push(`const component = defineComponent(script)`)\n        }\n      } else {\n        lines.push(`import { defineComponent } from '${api}'`)\n        lines.push(`const component = defineComponent({})`)\n      }\n\n      lines.push(`export default component`)\n\n      return { code: lines.join('\\n') }\n    },\n  })\n}\n\nfunction createScriptSetupTextDocument(\n  options: CreateVirtualTextDocumentOptions<{\n    type: typeof SCRIPT_SETUP_BLOCK_SELECTOR\n  }>,\n): TransformedBlockTextDocument {\n  return TransformedBlockTextDocument.create({\n    ...options,\n    transformer: (document) => {\n      const { scriptSetup } = document.container.descriptor\n      if (scriptSetup == null) return { code: '' }\n\n      // TODO: Transform\n      // TODO: Remove this hack and put a proper transform.\n      if (scriptSetup.content.includes('declare const props:')) {\n        return {\n          code: scriptSetup.content.replace(\n            'declare const props:',\n            'export type $Props =',\n          ),\n        }\n      }\n\n      return { code: scriptSetup.content }\n    },\n  })\n}\n\n// TODO: Support style variables type check.\n\nexport class RenderFunctionTextDocument extends TransformedBlockTextDocument {\n  private result!: CodegenResult & { template?: string }\n  private originalRange: [number, number] = [0, 0]\n  private originalMappings: CodegenResult['mappings'] = []\n  private generatedRange: [number, number] = [0, 0]\n  private templateIdentifiersRange: [number, number] = [0, 0]\n  private generatedMappings: CodegenResult['mappings'] = []\n  private expressionsMap: Record<string, [number, number]> = {}\n  private _contextCompletionsTriggerOffset: number = 0\n  private _tagCompletionsTriggerOffset: number = 0\n\n  constructor(\n    container: VueTextDocument,\n    selector: Selector,\n    transformed: TextDocument,\n    source: TextDocument,\n  ) {\n    super(container, selector, transformed, source, () => {\n      const code = this.tryGenerate()\n\n      return { code, map: this.result?.map }\n    })\n  }\n\n  public get contextCompletionsTriggerOffset(): number {\n    return this._contextCompletionsTriggerOffset\n  }\n\n  public get tagCompletionsTriggerOffset(): number {\n    return this._tagCompletionsTriggerOffset\n  }\n\n  public get ast(): CodegenResult['ast'] | undefined {\n    this.refresh()\n    if (this.result != null) return this.result.ast\n  }\n\n  public get parserErrors(): CodegenResult['errors'] {\n    return this.result?.errors ?? []\n  }\n\n  public getOriginalOffsetAt(\n    offset: number,\n  ): undefined | { offset: number; length: number } {\n    this.refresh()\n    const [start, end] = this.generatedRange\n\n    if (start <= offset && offset <= end) {\n      const mapping = binarySearch(\n        this.generatedMappings,\n        ([start, length]) => {\n          if (start <= offset && offset <= start + length) return 0\n          return start - offset\n        },\n        true,\n      )\n\n      if (mapping != null) {\n        const offsetInSource =\n          mapping[0] <= offset && offset <= mapping[0] + mapping[1]\n            ? offset - mapping[0]\n            : mapping[3] === 0\n            ? -1 // Include previous character if mapped to zero length\n            : 0\n\n        return {\n          offset: mapping[2] + offsetInSource,\n          length: Math.max(1, mapping[3] - offsetInSource),\n        }\n      }\n    }\n  }\n\n  public findExpression(\n    offset: number,\n    length: number,\n  ): undefined | { offset: number; length: number } {\n    const text = this.getText().substr(offset, length)\n    const expression = this.expressionsMap[text.trim()]\n\n    if (expression != null) {\n      return { offset: expression[0], length: expression[1] }\n    }\n  }\n\n  public isInGeneratedRange(offset: number): boolean {\n    this.refresh()\n    const [start, end] = this.generatedRange\n\n    return start <= offset && offset <= end\n  }\n\n  public isInTemplateIdentifierRange(offset: number): boolean {\n    this.refresh()\n    const [start, end] = this.templateIdentifiersRange\n\n    return start <= offset && offset <= end\n  }\n\n  public getGeneratedOffsetAt(\n    offset: number,\n  ): undefined | { length: number; offset: number } {\n    this.refresh()\n    const [start, end] = this.originalRange\n\n    if (start <= offset && offset <= end) {\n      const mapping = binarySearch(\n        this.originalMappings,\n        ([, , start, length]) => {\n          if (start <= offset && offset <= start + length) return 0\n          return start - offset\n        },\n      )\n\n      if (mapping != null) {\n        const offsetInGenerated = offset - mapping[2]\n\n        return {\n          offset: mapping[0] + offsetInGenerated,\n          length: Math.max(1, mapping[1] - offsetInGenerated),\n        }\n      }\n    }\n  }\n\n  public getAllGeneratedOffsetsAt(\n    offset: number,\n  ): undefined | Array<{ length: number; offset: number }> {\n    this.refresh()\n    const [start, end] = this.originalRange\n\n    if (start <= offset && offset <= end) {\n      const mappings = this.generatedMappings.filter(([, , start, length]) => {\n        return start <= offset && offset <= start + length\n      })\n\n      return mappings.map((mapping) => {\n        const offsetInGenerated =\n          mapping[2] <= offset && offset <= mapping[2] + mapping[3]\n            ? offset - mapping[2]\n            : 0\n        return {\n          offset: mapping[0] + offsetInGenerated,\n          length: Math.max(1, mapping[1] - offsetInGenerated),\n        }\n      })\n    }\n\n    return []\n  }\n\n  protected tryGenerate(): string {\n    try {\n      return this.generate()\n    } catch (error) {\n      const code = `\\n/* ${(error as Error).message} ${\n        (error as Error).stack ?? ''\n      } */ \\n`\n\n      if (error.loc == null) {\n        error.loc = this.container.descriptor.template?.loc\n      }\n\n      this.originalRange = [0, 0]\n      this.originalMappings = []\n      this.generatedRange = [0, 0]\n      this.templateIdentifiersRange = [0, 0]\n      this.generatedMappings = []\n      this.result = {\n        errors: [error],\n        code,\n        ast: null as any,\n        expressions: [],\n        mappings: [],\n      }\n\n      return code\n    }\n  }\n\n  protected generate(): string {\n    const { template } = this.container.descriptor\n\n    if (template == null) {\n      return ''\n    } else if (!this.isDirty && this.result?.template === template.content) {\n      return this.result.code\n    } else {\n      const errors: any[] = []\n      const components = this.getKnownComponents()\n      this.result = compile(template.content, {\n        filename: this.container.fsPath,\n        components: components,\n        onError: (error) => {\n          errors.push(error)\n        },\n      })\n\n      this.result.template = template.content\n\n      this.result.errors.push(...errors)\n\n      this.originalRange = [template.loc.start.offset, template.loc.end.offset]\n      this.originalMappings = this.result.mappings.slice()\n      this.generatedRange = [\n        this.result.code.indexOf('/*@@vue:start*/'),\n        this.result.code.indexOf('/*@@vue:end*/'),\n      ]\n      this.templateIdentifiersRange = [\n        this.result.code.indexOf('/*@@vue:identifiers-start*/'),\n        this.result.code.indexOf('/*@@vue:identifiers-end*/'),\n      ]\n      this.generatedMappings = this.result.mappings.filter(\n        (m) => this.generatedRange[0] <= m[0] && m[1] <= this.generatedRange[1],\n      )\n      this._contextCompletionsTriggerOffset = this.result.code.indexOf(\n        '/*@@vue:completions*/',\n      )\n      this._tagCompletionsTriggerOffset =\n        this.result.code.indexOf('/*@@vue:completionsTag*/') +\n        '/*@@vue:completionsTag*/'.length +\n        1\n\n      this.originalMappings.sort((a, b) => a[2] - b[2])\n      this.generatedMappings.sort((a, b) => a[0] - b[0])\n\n      this.expressionsMap = {}\n      const code = this.result.code\n\n      this.generatedMappings.forEach((p) => {\n        this.expressionsMap[code.substr(p[0], p[1])] = [p[2], p[3]]\n      })\n\n      return this.result.code\n    }\n  }\n\n  public toDisplayMappings(): string {\n    const mappings: string[] = []\n    const pos = (p: Position): string => `${p.line + 1}:${p.character + 1}`\n\n    if (this.result != null) {\n      const templateDoc = this.container.getDocument('template')\n      const template = templateDoc.getText()\n      const render = this.doc.getText()\n      this.result.mappings.forEach((m) => {\n        mappings.push(\n          `${pos(templateDoc.positionAt(m[2]))} => ${pos(\n            this.doc.positionAt(m[0]),\n          )} (${m[3]}:${m[1]}) \"${template.substr(\n            m[2],\n            m[3],\n          )}\"->\"${render.substr(m[0], m[1])}\"`,\n        )\n      })\n    }\n\n    return mappings.join('\\n')\n  }\n\n  protected getKnownComponents(): Record<string, ComponentImport> {\n    const componentsByName: Record<string, ComponentImport> = {}\n\n    const dir = Path.posix.dirname(this.container.fsPath)\n    this.container.options.getGlobalComponents().forEach((component) => {\n      const result = {\n        path: Path.posix.isAbsolute(component.source.moduleName)\n          ? getRelativeFileName(dir, component.source.moduleName)\n          : component.source.moduleName,\n        named: component.source.exportName != null,\n        name: component.source.exportName,\n      }\n\n      component.aliases.forEach((name) => {\n        componentsByName[name] = result\n      })\n    })\n\n    const { script, scriptSetup } = this.container.descriptor\n    const content = scriptSetup?.content ?? script?.content\n    if (content != null) {\n      // TODO: Cache this.\n      try {\n        const result = analyzer.analyzeScript(content, 'component.ts')\n        result.components.forEach((component) => {\n          const result = {\n            path: component.source.moduleName,\n            named: component.source.exportName != null,\n            name: component.source.exportName,\n          }\n\n          component.aliases.forEach((name) => {\n            componentsByName[name] = result\n          })\n        })\n      } catch {\n        // TODO: Handle this...\n      }\n    }\n\n    return componentsByName\n  }\n\n  public static create(\n    options: CreateVirtualTextDocumentOptions,\n  ): RenderFunctionTextDocument {\n    return new RenderFunctionTextDocument(\n      options.container,\n      options.selector,\n      TextDocument.create(\n        options.uri,\n        options.languageId,\n        options.version,\n        options.content,\n      ),\n      options.container.getDocument('template'),\n    )\n  }\n}\n\ninterface VueTextDocumentOptions {\n  vueVersion: string\n  getGlobalComponents(): ComponentRegistrationInfo[]\n}\n\nexport class VueTextDocument extends ProxyTextDocument {\n  private isDirty = true\n  private sfc!: ReturnType<typeof parse>\n  private readonly parseOptions: SFCParseOptions\n\n  private readonly documents = new Map<\n    string,\n    VirtualTextDocument | undefined\n  >()\n\n  public readonly options: VueTextDocumentOptions\n\n  constructor(\n    doc: TextDocument,\n    options?: VueTextDocumentOptions,\n    parseOptions?: SFCParseOptions,\n  ) {\n    super(doc)\n\n    this.options = {\n      vueVersion: '3.0.0',\n      getGlobalComponents: () => [],\n      ...options,\n    }\n\n    this.parseOptions = {\n      ...parseOptions,\n      filename: this.fsPath,\n      sourceMap: false,\n      pad: 'space',\n    }\n  }\n\n  public get descriptor(): SFCDescriptor {\n    this.parse()\n    return this.sfc.descriptor\n  }\n\n  public all(): VirtualTextDocument[] {\n    this.parse()\n    return Array.from(this.documents.values()).filter(isNotNull)\n  }\n\n  public getBlock(selector: BlockSelector): SFCBlock | null | undefined {\n    this.parse()\n    switch (selector.type) {\n      case SCRIPT_BLOCK_SELECTOR:\n        return this.descriptor.script\n      case SCRIPT_SETUP_BLOCK_SELECTOR:\n        return this.descriptor.scriptSetup\n      case TEMPLATE_BLOCK_SELECTOR:\n        return this.descriptor.template\n      default:\n        if ('index' in selector) {\n          const blocks =\n            selector.type === 'style'\n              ? this.descriptor.styles\n              : this.descriptor.customBlocks\n          return blocks[selector.index]\n        }\n    }\n  }\n\n  public blockAt(position: Position | number): SFCBlock | null | undefined {\n    const descriptor = this.descriptor\n    const offset = isNumber(position) ? position : this.offsetAt(position)\n\n    if (isOffsetInBlock(offset, descriptor.template)) return descriptor.template\n    if (isOffsetInBlock(offset, descriptor.script)) return descriptor.script\n    if (isOffsetInBlock(offset, descriptor.scriptSetup))\n      return descriptor.scriptSetup\n\n    return (\n      descriptor.styles.find(isOffsetInBlock.bind(null, offset)) ??\n      descriptor.customBlocks.find(isOffsetInBlock.bind(null, offset))\n    )\n  }\n\n  public documentAt(\n    position: Position | number,\n  ): VirtualTextDocument | undefined {\n    const block = this.blockAt(position)\n\n    if (block != null) {\n      const selector = this.getBlockSelector(block)\n      if (selector != null) {\n        return this.getDocument(selector)\n      }\n    }\n  }\n\n  public getBlockSelector(block: SFCBlock): BlockSelector | undefined {\n    switch (block.type) {\n      case 'script':\n        if ('setup' in block) {\n          return { type: SCRIPT_SETUP_BLOCK_SELECTOR }\n        } else {\n          return { type: SCRIPT_BLOCK_SELECTOR }\n        }\n      case 'template':\n        return { type: TEMPLATE_BLOCK_SELECTOR }\n      case 'style': {\n        const index = this.descriptor.styles.indexOf(block as SFCStyleBlock)\n        if (index >= 0) return { type: 'style', index }\n        break\n      }\n      default: {\n        const index = this.descriptor.customBlocks.indexOf(\n          block as SFCStyleBlock,\n        )\n        if (index >= 0) return { type: 'customBlocks', index }\n        break\n      }\n    }\n  }\n\n  public getDocumentFileName(selectorLike: SelectorLike): string {\n    const selector: Selector = isString(selectorLike)\n      ? { type: selectorLike }\n      : selectorLike\n    const id = this.getDocumentId(selector)\n    const ext = getLanguageExtension(this.getDocumentLanguage(selector))\n\n    return this.fsPath + VIRTUAL_FILENAME_SEPARATOR + id + '.' + ext\n  }\n\n  public getDocument(\n    selector: typeof RENDER_SELECTOR,\n  ): RenderFunctionTextDocument\n  public getDocument(selector: SelectorLike): VirtualTextDocument // TODO: Can return undefined\n  public getDocument(selector: string): VirtualTextDocument | undefined\n  public getDocument(selector: SelectorLike | string): any {\n    this.parse()\n\n    if (isString(selector)) {\n      if (selector.includes('/') || selector.includes('\\\\')) {\n        const result = parseVirtualFileName(selector)\n        if (result == null) return\n        selector = result.selector\n      } else {\n        selector = ({ type: selector } as unknown) as Selector\n      }\n    }\n\n    const id = this.getDocumentId(selector)\n\n    if (!this.documents.has(id)) {\n      switch (selector.type) {\n        case INTERNAL_MODULE_SELECTOR:\n          this.documents.set(id, this.createInternalModuleDocument())\n          break\n        case MODULE_SELECTOR:\n          this.documents.set(id, this.createModuleDocument())\n          break\n        case RENDER_SELECTOR:\n          this.documents.set(id, this.createRenderDocument())\n          break\n        case TEMPLATE_AST_SELECTOR:\n          this.documents.set(id, this.createTemplateASTDocument())\n          break\n        default:\n          this.documents.set(id, this.createBlockDocument(selector))\n          break\n      }\n    }\n\n    return this.documents.get(id)\n  }\n\n  protected createBlockDocument(\n    selector: BlockSelector,\n  ): VirtualTextDocument | undefined {\n    const block = this.getBlock(selector)\n    if (block == null) return\n    const options = {\n      container: this,\n      selector,\n      uri: asUri(this.getDocumentFileName(selector)),\n      languageId: this.getDocumentLanguage(selector),\n      version: this.version,\n      content: block.content,\n    }\n\n    if (selector.type === SCRIPT_SETUP_BLOCK_SELECTOR) {\n      return createScriptSetupTextDocument({ ...options, selector })\n    } else {\n      return VirtualTextDocument.create(options)\n    }\n  }\n\n  protected createInternalModuleDocument(): TransformedBlockTextDocument {\n    return createInternalModuleTextDocument({\n      container: this,\n      selector: { type: INTERNAL_MODULE_SELECTOR },\n      uri: asUri(this.getDocumentFileName(INTERNAL_MODULE_SELECTOR)),\n      languageId: this.getDocumentLanguage({ type: INTERNAL_MODULE_SELECTOR }),\n      version: this.version,\n      content: '',\n    })\n  }\n\n  protected createModuleDocument(): TransformedBlockTextDocument {\n    return createVueModuleTextDocument({\n      container: this,\n      selector: { type: MODULE_SELECTOR },\n      uri: asUri(this.getDocumentFileName(MODULE_SELECTOR)),\n      languageId: this.getDocumentLanguage({ type: MODULE_SELECTOR }),\n      version: this.version,\n      content: '',\n    })\n  }\n\n  protected createTemplateASTDocument(): TransformedBlockTextDocument {\n    return TransformedBlockTextDocument.create({\n      container: this,\n      sourceSelector: { type: RENDER_SELECTOR },\n      selector: { type: TEMPLATE_AST_SELECTOR },\n      uri: asUri(this.getDocumentFileName(TEMPLATE_AST_SELECTOR)),\n      languageId: this.getDocumentLanguage({ type: TEMPLATE_AST_SELECTOR }),\n      version: this.version,\n      content: '',\n      transformer() {\n        const code = JSON.stringify(\n          this.container.getDocument(RENDER_SELECTOR)?.ast ?? {},\n          null,\n          2,\n        )\n          .replace(/\"type\": 0,/g, (_) => `${_} // Root`)\n          .replace(/\"type\": 1,/g, (_) => `${_} // Element`)\n          .replace(/\"type\": 2,/g, (_) => `${_} // Text`)\n          .replace(/\"type\": 3,/g, (_) => `${_} // Comment`)\n          .replace(/\"type\": 4,/g, (_) => `${_} // Expression`)\n          .replace(/\"type\": 5,/g, (_) => `${_} // Interpolation`)\n          .replace(/\"type\": 6,/g, (_) => `${_} // Attribute`)\n          .replace(/\"type\": 7,/g, (_) => `${_} // Directive`)\n\n        return {\n          code,\n        }\n      },\n    })\n  }\n\n  protected createRenderDocument(): RenderFunctionTextDocument {\n    return RenderFunctionTextDocument.create({\n      container: this,\n      selector: { type: RENDER_SELECTOR },\n      uri: asUri(this.getDocumentFileName(RENDER_SELECTOR)),\n      languageId: this.getDocumentLanguage({ type: RENDER_SELECTOR }),\n      version: this.version,\n      content: '',\n    })\n  }\n\n  protected getDocumentLanguage(selector: Selector): string {\n    switch (selector.type) {\n      case INTERNAL_MODULE_SELECTOR:\n      case MODULE_SELECTOR:\n        return 'typescript'\n      case RENDER_SELECTOR:\n        return 'typescriptreact'\n      case TEMPLATE_AST_SELECTOR:\n        return 'jsonc'\n      default:\n        return getBlockLanguage(this.getBlock(selector))\n    }\n  }\n\n  protected getDocumentId(selector: Selector): string {\n    if (isString(selector)) return selector\n    if ('index' in selector) return `${selector.type}__${selector.index}`\n    return selector.type\n  }\n\n  public markDirty(): void {\n    this.isDirty = true\n    this.all().forEach((doc) => doc.markDirty())\n  }\n\n  protected parse(): void {\n    if (!this.isDirty) return\n    this.isDirty = false\n    const source = this.getText()\n    try {\n      const sfc = parseSFC(source, this.parseOptions)\n\n      if (this.sfc != null) {\n        const { descriptor: prev } = this.sfc\n        const { descriptor: next } = sfc\n\n        if (prev.script?.lang !== next.script?.lang) {\n          this.documents.delete(\n            this.getDocumentId({ type: SCRIPT_BLOCK_SELECTOR }),\n          )\n        }\n        if (prev.scriptSetup?.lang !== next.scriptSetup?.lang) {\n          this.documents.delete(\n            this.getDocumentId({ type: SCRIPT_SETUP_BLOCK_SELECTOR }),\n          )\n        }\n        if (prev.template?.lang !== next.template?.lang) {\n          this.documents.delete(\n            this.getDocumentId({ type: TEMPLATE_BLOCK_SELECTOR }),\n          )\n        }\n      }\n\n      this.sfc = sfc\n    } catch (error) {\n      // -- skip invalid state.\n      console.error(\n        `Error parsing SFC \"${this.fsPath}\": ${(error as Error).message} ${\n          (error as Error).stack ?? ''\n        }`,\n      )\n    }\n  }\n\n  public static create(\n    uri: string,\n    languageId: string,\n    version: number,\n    content: string,\n    options?: VueTextDocumentOptions,\n    parseOptions?: SFCParseOptions,\n  ): VueTextDocument {\n    return new VueTextDocument(\n      TextDocument.create(uri, languageId, version, content),\n      options,\n      parseOptions,\n    )\n  }\n\n  public static update(\n    document: VueTextDocument,\n    changes: TextDocumentContentChangeEvent[],\n    version: number,\n  ): VueTextDocument {\n    document.doc = TextDocument.update(document.doc, changes, version)\n    document.isDirty = true\n    document.documents.forEach((document) => {\n      if (document != null) document.markDirty()\n    })\n\n    return document\n  }\n}\n\nfunction getRelativeFileName(dir: string, fileName: string): string {\n  const relative = Path.posix.relative(dir, fileName)\n\n  return relative.startsWith('.') ? relative : `./${relative}`\n}\n"],"names":["Path","uriToFsPath","URI","isNumber","createAnalyzer","ScriptBlockAnalyzer","ComponentsOptionAnalyzer","parse","TextDocument","SourceMapConsumer","getComponentName","compile","isNotNull","isString"],"mappings":"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"}