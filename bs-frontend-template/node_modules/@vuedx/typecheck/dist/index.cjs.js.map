{"version":3,"file":"index.cjs.js","sources":["../src/TypeScriptServerHost.ts","../src/diagnostics.ts","../../../node_modules/.pnpm/vscode-languageserver-textdocument@1.0.1/node_modules/vscode-languageserver-textdocument/lib/esm/main.js","../src/generateCodeFrame.ts","../src/cli.ts","../src/index.ts"],"sourcesContent":["import { ChildProcess, fork } from 'child_process'\nimport Path from 'path'\nimport { createInterface, Interface } from 'readline'\nimport { Readable, Writable } from 'stream'\nimport Proto from 'typescript/lib/protocol'\nimport resolveFrom from 'resolve-from'\n\nfunction resolve(moduleId: string, directory: string): string {\n  try {\n    return resolveFrom(directory, moduleId)\n  } catch {\n    return require.resolve(moduleId)\n  }\n}\n\nconst isDebugMode = process.env.DEBUG != null\nfunction debug(...args: any[]): void {\n  if (__DEV__ && isDebugMode) {\n    console.debug(...args)\n  }\n}\n\nexport class TypeScriptServerHost {\n  private readonly voidCommands: Proto.CommandTypes[] = [\n    Proto.CommandTypes.Open,\n    Proto.CommandTypes.Geterr,\n    Proto.CommandTypes.GeterrForProject,\n  ]\n\n  public readonly serverPath = resolve('typescript/lib/tsserver', process.cwd())\n  public readonly pluginPath = Path.dirname(\n    require.resolve('@vuedx/typescript-plugin-vue/package.json'),\n  )\n\n  public readonly exitStatus: Promise<number>\n\n  private isClosed = false\n  private readonly server: ChildProcess\n  private readonly stdin: Writable\n  private readonly stdout: Readable\n  private readonly readline: Interface\n\n  private pendingResponses = 0\n\n  private readonly responseHandlers = new Map<\n    number,\n    (response: Proto.Response) => void\n  >()\n\n  private _messageId = 0\n  private getNextMessageId(): number {\n    return this._messageId++\n  }\n\n  constructor() {\n    // prettier-ignore\n    const debugArgs =\n      process.env.DEBUG_TS_SERVER != null\n        ? [\n            '--logVerbosity', 'verbose',\n            '--logFile', process.env.TS_SERVER_LOG_FILE ?? 'tsserver.log',\n          ]\n        : []\n    // prettier-ignore\n    this.server = fork(this.serverPath, [\n      ...debugArgs,\n      '--globalPlugins', this.pluginPath,\n      '--pluginProbeLocations', this.pluginPath,\n      '--allowLocalPluginLoads',\n      '--useSingleInferredProject'\n    ], {\n      cwd: process.cwd(),\n      stdio: ['pipe', 'pipe', 'pipe', 'ipc'],\n      execArgv: \n        process.env.TS_SERVER_INSPECT != null ? ['--inspect'] :\n        process.env.TS_SERVER_INSPECT_BRK != null ? ['--inspect-brk=9229'] :\n        []\n    });\n\n    this.exitStatus = new Promise((resolve) => {\n      let isResolved = false\n      this.server.on('exit', (code) => {\n        if (!isResolved) resolve(code ?? 0)\n      })\n\n      this.server.on('error', (error) => {\n        isResolved = true\n        console.error(error)\n\n        resolve(-1)\n      })\n    })\n\n    if (this.server.stdout == null) throw new Error('No stdout')\n    if (this.server.stdin == null) throw new Error('No stdin')\n\n    this.stdout = this.server.stdout\n    this.stdin = this.server.stdin\n\n    this.stdout.setEncoding('utf-8')\n    this.readline = createInterface({ input: this.stdout })\n\n    this.readline.on('line', (line) => {\n      if (line.startsWith('{')) {\n        const payload:\n          | Proto.Request\n          | Proto.Response\n          | Proto.Event = JSON.parse(line)\n\n        debug('RECV:', payload)\n        if (payload.type === 'response') {\n          this.pendingResponses -= 1\n          this.responseHandlers.get(payload.request_seq)?.(payload)\n        } else if (payload.type === 'request') {\n          // --\n        } else if (payload.type === 'event') {\n          this.onEvent(payload)\n        }\n\n        if (this.isClosed) {\n          this.shutdown()\n        }\n      }\n    })\n  }\n\n  private eventHandlers: Record<string, Function[]> = {}\n\n  private onEvent(payload: Proto.Event): void {\n    this.eventHandlers[payload.event]?.forEach((fn) => fn(payload.body))\n  }\n\n  private send(message: Omit<Proto.Message, 'seq'>): number {\n    if (this.isClosed) {\n      throw new Error('Cannot send messages to a closed server connection.')\n    }\n\n    const seq = this.getNextMessageId()\n    const payload = { seq, ...message }\n    debug('SEND:', payload)\n    this.stdin.write(JSON.stringify(payload) + '\\n')\n\n    return seq\n  }\n\n  public on(\n    event: Proto.DiagnosticEventKind,\n    fn: (\n      event: Required<Proto.DiagnosticEvent>['body'],\n    ) => void | Promise<void>,\n  ): () => void\n  public on(\n    event: Proto.RequestCompletedEventName,\n    fn: (\n      event: Required<Proto.RequestCompletedEvent>['body'],\n    ) => void | Promise<void>,\n  ): () => void\n  public on(\n    event: Proto.ProjectsUpdatedInBackgroundEventName,\n    fn: (\n      event: Required<Proto.ProjectsUpdatedInBackgroundEvent>['body'],\n    ) => void | Promise<void>,\n  ): () => void\n\n  public on(\n    event:\n      | Proto.DiagnosticEventKind\n      | Proto.RequestCompletedEventName\n      | Proto.ProjectsUpdatedInBackgroundEventName,\n    fn: Function,\n  ): () => void {\n    const handlers =\n      this.eventHandlers[event] ?? (this.eventHandlers[event] = [])\n\n    handlers.push(fn)\n\n    return () => {\n      const index = handlers.indexOf(fn)\n      if (index >= 0) {\n        handlers.splice(index, 1)\n      }\n    }\n  }\n\n  public async sendRequest(\n    request: Omit<Proto.Request, 'seq' | 'type'>,\n  ): Promise<Proto.Response | number | undefined> {\n    const id = this.send({ type: 'request', ...request })\n\n    if (!this.voidCommands.includes(request.command as Proto.CommandTypes)) {\n      this.pendingResponses += 1\n      return await new Promise((resolve) => {\n        this.responseHandlers.set(id, (response) => resolve(response))\n      })\n    } else {\n      return id\n    }\n  }\n\n  public sendEvent(event: Omit<Proto.Request, 'seq' | 'type'>): void {\n    this.send({ type: 'event', ...event })\n  }\n\n  public async close(): Promise<number> {\n    this.isClosed = true\n    this.shutdown()\n\n    return await this.exitStatus\n  }\n\n  private shutdown(): void {\n    if (this.pendingResponses <= 0) {\n      debug(`shutting down...`)\n      this.stdin.end()\n    } else {\n      debug(`shutting after ${this.pendingResponses}...`)\n    }\n  }\n\n  public async sendCommand(\n    command: 'configure' | Proto.CommandTypes.Configure,\n    args: Proto.ConfigureRequest['arguments'],\n  ): Promise<Proto.ConfigureResponse>\n  public async sendCommand(\n    command: 'projectInfo' | Proto.CommandTypes.ProjectInfo,\n    args: Proto.ProjectInfoRequest['arguments'],\n  ): Promise<Proto.ProjectInfoResponse>\n\n  public async sendCommand(\n    command:\n      | 'compilerOptionsForInferredProjects'\n      | Proto.CommandTypes.CompilerOptionsForInferredProjects,\n    args: Proto.SetCompilerOptionsForInferredProjectsRequest['arguments'],\n  ): Promise<Proto.SetCompilerOptionsForInferredProjectsResponse>\n\n  public async sendCommand(\n    command: 'updateOpen' | Proto.CommandTypes.UpdateOpen,\n    args: Proto.UpdateOpenRequest['arguments'],\n  ): Promise<number>\n\n  public async sendCommand(\n    command: 'geterr' | Proto.CommandTypes.Geterr,\n    args: Proto.GeterrRequest['arguments'],\n  ): Promise<number>\n  public async sendCommand(\n    command: 'geterrForProject' | Proto.CommandTypes.GeterrForProject,\n    args: Proto.GeterrForProjectRequest['arguments'],\n  ): Promise<number>\n\n  public async sendCommand(command: string, args: any): Promise<any> {\n    return this.sendRequest({ command, arguments: args }) as any\n  }\n}\n","import glob from 'fast-glob'\nimport Path from 'path'\nimport FS from 'fs'\nimport type ts from 'typescript/lib/tsserverlibrary'\nimport TS from 'typescript/lib/tsserverlibrary'\nimport { TypeScriptServerHost } from './TypeScriptServerHost'\n\nfunction toNormalizedPath(fileName: string): string {\n  return TS.server.toNormalizedPath(fileName)\n}\nexport type Diagnostics = Array<{\n  fileName: string\n  diagnostics: ts.server.protocol.Diagnostic[]\n}>\n\nclass AbortSignal {\n  private _aborted = false\n  private _onabort?: () => void | Promise<void>\n\n  public get aborted(): boolean {\n    return this._aborted\n  }\n\n  // eslint-disable-next-line accessor-pairs\n  public set onabort(fn: () => void | Promise<void>) {\n    this._onabort = fn\n  }\n\n  private async dispatchEvent(event: 'aborted'): Promise<void> {\n    this._aborted = true\n    return await this._onabort?.()\n  }\n}\nexport class AbortController {\n  public readonly signal = new AbortSignal()\n\n  public async abort(): Promise<void> {\n    // @ts-expect-error\n    return await this.signal.dispatchEvent('aborted')\n  }\n}\n\nexport async function* getDiagnostics(\n  directory: string,\n  cancellationToken: AbortSignal,\n  logging: boolean = false,\n): AsyncGenerator<Diagnostics, Diagnostics> {\n  const host = new TypeScriptServerHost()\n  cancellationToken.onabort = async () => {\n    await host.close()\n  }\n  const projectRootPath = toNormalizedPath(directory)\n  const diagnosticsPerFile = new Map<\n    string,\n    {\n      semantic?: ts.server.protocol.Diagnostic[]\n      syntax?: ts.server.protocol.Diagnostic[]\n      suggestion?: ts.server.protocol.Diagnostic[]\n    }\n  >()\n\n  function setDiagnostics(\n    fileName: string,\n    kind: 'semantic' | 'syntax' | 'suggestion',\n    diagnostics: ts.server.protocol.Diagnostic[],\n  ): void {\n    if (fileName.includes('/node_modules/')) return\n    if (diagnostics.length > 0) {\n      const current = diagnosticsPerFile.get(fileName) ?? {}\n      diagnosticsPerFile.set(fileName, {\n        ...current,\n        [kind]: diagnostics,\n      })\n    }\n  }\n  const pack = (): Diagnostics =>\n    Array.from(diagnosticsPerFile.entries())\n      .map(([fileName, diagnostics]) => ({\n        fileName,\n        diagnostics: merge(\n          diagnostics.semantic,\n          diagnostics.suggestion,\n          diagnostics.syntax,\n        ),\n      }))\n      .filter((item) => item.diagnostics.length > 0)\n\n  let useProject: boolean = true\n  const refresh = async (files: string[]): Promise<Diagnostics> => {\n    diagnosticsPerFile.clear()\n    const start = Date.now()\n    if (logging) console.log(`Checking...`)\n    const id = useProject\n      ? await host.sendCommand('geterrForProject', { file: files[0], delay: 1 })\n      : await host.sendCommand('geterr', { files, delay: 1 })\n\n    return await new Promise((resolve) => {\n      const off = host.on('requestCompleted', async (event) => {\n        if (event.request_seq === id) {\n          if (logging) {\n            console.log(\n              `Completed in ${((Date.now() - start) / 1000).toFixed(2)}s`,\n            )\n          }\n          resolve(pack())\n          off()\n        }\n      })\n    })\n  }\n  await host.sendCommand('configure', {\n    hostInfo: '@vuedx/typecheck',\n    preferences: { disableSuggestions: false },\n  })\n\n  let files: string[]\n  const jsConfig = Path.resolve(directory, 'jsconfig.json')\n  const tsConfig = Path.resolve(directory, 'tsconfig.json')\n  if (FS.existsSync(tsConfig) || FS.existsSync(jsConfig)) {\n    useProject = true\n    const configFile = FS.existsSync(tsConfig) ? tsConfig : jsConfig\n    await host.sendCommand('updateOpen', {\n      openFiles: [\n        {\n          file: toNormalizedPath(configFile),\n          projectRootPath,\n        },\n      ],\n    })\n\n    const { body } = await host.sendCommand('projectInfo', {\n      file: toNormalizedPath(configFile),\n      projectFileName: toNormalizedPath(configFile),\n      needFileNameList: true,\n    })\n\n    files =\n      body?.fileNames?.filter(\n        (fileName) =>\n          !fileName.includes('/node_modules/') && !fileName.endsWith('.json'),\n      ) ?? []\n\n    if (files.length > 0) {\n      await host.sendCommand('updateOpen', {\n        closedFiles: [toNormalizedPath(configFile)],\n      })\n      await host.sendCommand('updateOpen', {\n        openFiles: [\n          {\n            file: toNormalizedPath(files[0]),\n            projectFileName: toNormalizedPath(configFile),\n          },\n        ],\n      })\n    }\n  } else {\n    await host.sendCommand('compilerOptionsForInferredProjects', {\n      options: {\n        allowJs: true,\n        checkJs: true,\n        strict: true,\n        alwaysStrict: true,\n        allowNonTsExtensions: true,\n        jsx: 'preserve' as any,\n      },\n    })\n\n    files = (\n      await glob(['**/*.vue', '**/*.ts', '**/*.js', '**/*.jsx', '**/*.tsx'], {\n        cwd: directory,\n        absolute: true,\n        ignore: ['node_modules', 'dist'],\n      })\n    ).map((fileName) => toNormalizedPath(fileName))\n\n    await host.sendCommand('updateOpen', {\n      openFiles: files.map((file) => ({ file, projectRootPath })),\n    })\n  }\n\n  let done: (result: Diagnostics) => void\n  let promise = new Promise<Diagnostics>((resolve) => {\n    done = resolve\n    void refresh(files).then(done)\n  })\n\n  const next = (): void => {\n    promise = new Promise((resolve) => {\n      done = resolve\n    })\n  }\n\n  host.on('projectsUpdatedInBackground', async (event) => {\n    done(await refresh(files))\n  })\n\n  host.on('semanticDiag', (event) => {\n    setDiagnostics(event.file, 'semantic', event.diagnostics)\n  })\n\n  host.on('syntaxDiag', (event) => {\n    setDiagnostics(event.file, 'syntax', event.diagnostics)\n  })\n\n  host.on('suggestionDiag', (event) => {\n    setDiagnostics(event.file, 'suggestion', event.diagnostics)\n  })\n\n  while (!cancellationToken.aborted) {\n    yield await promise\n    next()\n  }\n\n  return pack()\n}\n\nexport async function getDiagnostics2(directory: string): Promise<Diagnostics> {\n  const controller = new AbortController()\n  const stream = getDiagnostics(directory, controller.signal)\n  const result = await stream.next()\n  await controller.abort()\n\n  return result.value\n}\n\nfunction merge<T>(...items: Array<T[] | undefined>): T[] {\n  return items.flatMap((item) => item ?? [])\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (changes, version) {\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                var range = getWellformedRange(change.range);\n                // update content\n                var startOffset = this.offsetAt(range.start);\n                var endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                var startLine = Math.max(range.start.line, 0);\n                var endLine = Math.max(range.end.line, 0);\n                var lineOffsets = this._lineOffsets;\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice.apply(lineOffsets, [startLine + 1, endLine - startLine].concat(addedLineOffsets));\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                var diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return { line: line, character: offset - lineOffsets[line] };\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.isIncremental = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    };\n    FullTextDocument.isFull = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    };\n    return FullTextDocument;\n}());\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifing its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = 0;\n        var spans = [];\n        for (var _i = 0, sortedEdits_1 = sortedEdits; _i < sortedEdits_1.length; _i++) {\n            var e = sortedEdits_1[_i];\n            var startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    var p = (data.length / 2) | 0;\n    var left = data.slice(0, p);\n    var right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    var leftIdx = 0;\n    var rightIdx = 0;\n    var i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        var ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\n    if (textOffset === void 0) { textOffset = 0; }\n    var result = isAtLineStart ? [textOffset] : [];\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charCodeAt(i);\n        if (ch === 13 /* CarriageReturn */ || ch === 10 /* LineFeed */) {\n            if (ch === 13 /* CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction getWellformedRange(range) {\n    var start = range.start;\n    var end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    var range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range: range };\n    }\n    return textEdit;\n}\n","export function generateCodeFrame(\n  source: string,\n  start = 0,\n  end = source.length,\n  underline = (str: string) => str,\n  gutter = (str: string) => str,\n  range: number = 2,\n): string {\n  const lines = source.split(/\\r?\\n/)\n  let count = 0\n  const res: string[] = []\n  const width = String(lines.length).length\n  const getLine = (line: number | string): string =>\n    String(line).padStart(width) + ' | '\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + 1\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue\n        const line = j + 1\n        res.push(`${gutter(getLine(line))}${lines[j]}`)\n        const lineLength = lines[j].length\n        if (j === i) {\n          // push underline\n          const pad = start - (count - lineLength) + 1\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start,\n          )\n          res.push(\n            gutter(getLine('')) +\n              ' '.repeat(pad) +\n              underline('~'.repeat(length)),\n          )\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1)\n            res.push(gutter(getLine('')) + underline('~'.repeat(length)))\n          }\n          count += lineLength + 1\n        }\n      }\n      break\n    }\n  }\n  return res.join('\\n')\n}\n","import chalk from 'chalk'\nimport FS, { promises as FSP } from 'fs'\n// @ts-expect-error\nimport parseArgs from 'minimist'\nimport { collect, collectError } from '@vuedx/shared'\nimport Path from 'path'\nimport readline from 'readline'\nimport TS from 'typescript/lib/tsserverlibrary'\nimport { Position, TextDocument } from 'vscode-languageserver-textdocument'\nimport {\n  AbortController,\n  Diagnostics,\n  getDiagnostics,\n  getDiagnostics2,\n} from './diagnostics'\nimport { generateCodeFrame } from './generateCodeFrame'\n\nconst colors = {\n  warning: chalk.yellow,\n  error: chalk.red,\n  suggestion: chalk.green,\n  message: chalk.blueBright,\n}\nlet directory = process.cwd()\nconst cache = new Map<string, TextDocument>()\n\nfunction print(chunk: string): void {\n  process.stdout.write(chunk)\n}\nexport async function getTextDocument(file: string): Promise<TextDocument> {\n  return cache.get(file) ?? (await createTextDocument(file))\n}\n\nfunction clearScreen(): void {\n  const blank = '\\n'.repeat(process.stdout.rows)\n  console.log(blank)\n  readline.cursorTo(process.stdout, 0, 0)\n  readline.clearScreenDown(process.stdout)\n}\nasync function createTextDocument(file: string): Promise<TextDocument> {\n  const content = await FSP.readFile(file, { encoding: 'utf-8' })\n  const fileName = toNormalizedPath(file)\n  const document = TextDocument.create(\n    fileName,\n    Path.posix.extname(file),\n    0,\n    content,\n  )\n\n  cache.set(fileName, document)\n\n  return document\n}\n\nfunction toNormalizedPath(fileName: string): string {\n  return TS.server.toNormalizedPath(fileName)\n}\n\nfunction formatLocation(\n  fileName: string,\n  start: TS.server.protocol.Location,\n): string {\n  const relativeFileName = convertToRelativePath(fileName)\n  const line = start.line + 1\n  const column = start.offset + 1\n\n  let output = ''\n  output += chalk.cyan(relativeFileName)\n  output += ':'\n  output += chalk.yellow(`${line}`)\n  output += ':'\n  output += chalk.yellow(`${column}`)\n  return output\n}\n\nfunction getDiagnosticCategory(\n  diagnostic: Pick<TS.server.protocol.Diagnostic, 'category'>,\n): keyof typeof colors {\n  return (/^(warning|error|suggestion|message)$/i.test(diagnostic.category)\n    ? diagnostic.category.toLowerCase()\n    : 'error') as any\n}\n\nfunction toPosition(loc: TS.server.protocol.Location): Position {\n  return { line: loc.line - 1, character: loc.offset - 1 }\n}\n\nasync function formatDiagnosticsWithColorAndContext(\n  fileName: string,\n  diagnostic: TS.server.protocol.Diagnostic,\n): Promise<string> {\n  let output = ''\n  output += formatLocation(fileName, diagnostic.start) // TODO: GH#18217\n  output += ' - '\n  const category = getDiagnosticCategory(diagnostic)\n  output += colors[category](category)\n  output += chalk.gray(` ${diagnostic.source ?? ''}${diagnostic.code ?? ''}: `)\n  output += diagnostic.text\n\n  const document = await getTextDocument(fileName)\n  output += '\\n'\n  output += generateCodeFrame(\n    document.getText(),\n    document.offsetAt(toPosition(diagnostic.start)),\n    document.offsetAt(toPosition(diagnostic.end)),\n    (underline) => colors[category](underline),\n    (gutter) => chalk.bgWhite(gutter.trimEnd()) + ' ',\n  )\n  if (diagnostic.relatedInformation != null) {\n    for (const { message, span, category } of diagnostic.relatedInformation) {\n      output += '\\n'\n      const color = colors[getDiagnosticCategory({ category })]\n      if (span != null) {\n        output += '    ' + formatLocation(span.file, span.start)\n        const document = await getTextDocument(span.file)\n        output += '\\n'\n        output += generateCodeFrame(\n          document.getText(),\n          document.offsetAt(toPosition(span.start)),\n          document.offsetAt(toPosition(span.end)),\n          (underline) => color(underline),\n          (gutter) => chalk.bgWhite(gutter.trimEnd()) + ' ',\n        )\n        output += '\\n'\n      }\n      output += '    ' + message\n    }\n  }\n\n  output += '\\n'\n\n  return output\n}\n\nfunction formatDiagnostic(\n  fileName: string,\n  diagnostic: TS.server.protocol.Diagnostic,\n): string {\n  const errorMessage = `${diagnostic.category} ${diagnostic.source ?? ''}${\n    diagnostic.code ?? ''\n  }: ${diagnostic.text}`\n\n  const relativeFileName = convertToRelativePath(fileName)\n  const line = diagnostic.start.line + 1\n  const column = diagnostic.start.offset + 1\n\n  return `${relativeFileName}(${line},${column}): ${errorMessage}`\n}\n\nconst ERROR_RE = /^(error)$/i\nfunction getErrorCount(diagnostics: Diagnostics): number {\n  return diagnostics.reduce(\n    (count, diagnostic) =>\n      count +\n      diagnostic.diagnostics.filter((diagnostic) =>\n        ERROR_RE.test(diagnostic.category),\n      ).length,\n    0,\n  )\n}\n\nfunction convertToRelativePath(fileName: string): string {\n  return Path.isAbsolute(fileName)\n    ? Path.relative(directory, fileName).replace(/\\\\/g, '/')\n    : fileName\n}\n\nasync function _cli(): Promise<void> {\n  const { pretty, vue, help, watch, format, _: argv } = parseArgs(\n    process.argv.slice(2),\n    {\n      boolean: ['json', 'rdjson', 'verbose', 'vue', 'help', 'pretty', 'watch'],\n      string: ['format'],\n      default: { pretty: true, format: 'raw' },\n    },\n  )\n\n  if (help === true) {\n    console.error(\n      `\nUsage: vuedx-typecheck [directory] <options>\n\nOptions\n    --format    One of 'raw', 'json' or 'rdjson'\n    --vue       process only vue files\n    --no-pretty Pretty print output\n    --help      display help\n    --watch     Watch files for changes\n`.trim(),\n    )\n    process.exit(0)\n  }\n\n  directory =\n    argv[0] != null\n      ? Path.isAbsolute(argv[0])\n        ? argv[0]\n        : Path.resolve(process.cwd(), argv[0])\n      : process.cwd()\n\n  if (!FS.existsSync(directory)) {\n    console.error(`Cannot find directory: \"${String(argv[0])}\"`)\n    process.exit(1)\n  }\n\n  console.debug('Running for ' + directory)\n  if (!FS.statSync(directory).isDirectory()) {\n    console.error(\n      `Expecting a directory, but \"${process.argv[2]}\" is not a directory.`,\n    )\n    process.exit(1)\n  }\n\n  collect('cli exec', {\n    watch,\n    format,\n    vue,\n    pretty,\n  })\n\n  if (watch === true) {\n    const controller = new AbortController()\n    for await (const result of getDiagnostics(\n      directory,\n      controller.signal,\n      true,\n    )) {\n      clearScreen()\n      await handleResults(result, { format, pretty, vue })\n    }\n  } else {\n    const result = await getDiagnostics2(directory)\n    await handleResults(result, { format, pretty, vue })\n\n    if (getErrorCount(result) > 0 && format === 'raw') process.exit(2)\n    else process.exit(0)\n  }\n}\n\nexport async function cli(): Promise<void> {\n  try {\n    await _cli()\n  } catch (error) {\n    collectError(error)\n    throw error\n  }\n}\n\n/**\n * Return diagnostic result in Reviewdog Diagnostic Format\n * @see https://github.com/reviewdog/reviewdog/tree/master/proto/rdf#rdjson\n */\nfunction encodeRdJSON(result: Diagnostics, pretty: boolean): string {\n  const severityMap = {\n    warning: 'WARNING',\n    error: 'ERROR',\n    suggestion: 'INFO',\n    message: 'INFO',\n  }\n\n  return JSON.stringify(\n    {\n      source: {\n        name: 'VueDX typecheck',\n        url:\n          'https://github.com/znck/vue-developer-experience/tree/master/packages/typecheck',\n      },\n      diagnostics: result.flatMap((sourceFile) => {\n        return sourceFile.diagnostics.map((diagnostic) => ({\n          message: diagnostic.text,\n          severity:\n            severityMap[diagnostic.category as keyof typeof severityMap],\n          location: {\n            path: sourceFile.fileName,\n            range: {\n              start: {\n                line: diagnostic.start.line,\n                column: diagnostic.start.offset,\n              },\n              end: { line: diagnostic.end.line, column: diagnostic.end.offset },\n            },\n          },\n          code: {\n            value: `${diagnostic.code ?? ''}`,\n          },\n          relatedInformation: diagnostic.relatedInformation?.map((info) => ({\n            message: info.message,\n            severity: severityMap[info.category as keyof typeof severityMap],\n            location:\n              info.span != null\n                ? {\n                    path: info.span.file,\n                    range: {\n                      start: {\n                        line: info.span.start.line,\n                        column: info.span.start.offset,\n                      },\n                      end: {\n                        line: info.span.end.line,\n                        column: info.span.end.offset,\n                      },\n                    },\n                  }\n                : undefined,\n            code: {\n              value: `${info.code ?? ''}`,\n            },\n          })),\n        }))\n      }),\n    },\n    null,\n    pretty ? 2 : 0,\n  )\n}\n\nasync function handleResults(\n  result: Diagnostics,\n  {\n    vue,\n    format,\n    pretty,\n  }: {\n    vue: boolean\n    pretty: boolean\n    format: string\n  },\n): Promise<void> {\n  if (vue) {\n    result = result.filter((item) => item.fileName.endsWith('.vue'))\n  }\n\n  result.forEach((sourceFile) => {\n    sourceFile.fileName = convertToRelativePath(sourceFile.fileName)\n    sourceFile.diagnostics.forEach((diagnostic) => {\n      diagnostic.relatedInformation?.forEach((info) => {\n        if (info.span != null) {\n          info.span.file = convertToRelativePath(info.span.file)\n        }\n      })\n    })\n  })\n\n  switch (format) {\n    case 'json':\n      print(JSON.stringify(result, null, pretty ? 2 : 0))\n      break\n    case 'rdjson':\n      print(encodeRdJSON(result, pretty))\n      break\n    case 'raw':\n      {\n        const fn = pretty\n          ? formatDiagnosticsWithColorAndContext\n          : formatDiagnostic\n        const content = await Promise.all(\n          result.flatMap((sourceFile) =>\n            sourceFile.diagnostics.map((diagnostic) =>\n              fn(sourceFile.fileName, diagnostic),\n            ),\n          ),\n        )\n\n        print(content.join('\\n'))\n\n        const count = getErrorCount(result)\n\n        print(`\\nFound ${count} ${count === 1 ? 'error' : 'errors'}.`)\n      }\n      break\n    default:\n      throw new Error(`Unknown output format: \"${format}\"`)\n  }\n}\n","import { collectError, Telemetry } from '@vuedx/shared'\nimport { version } from '../package.json'\nimport { Diagnostics, getDiagnostics2 } from './diagnostics'\n\nimport { cli as cli2 } from './cli'\n\nexport type { Diagnostics }\nexport async function cli(): Promise<void> {\n  setup()\n\n  return await cli2()\n}\nexport async function getDiagnostics(directory: string): Promise<Diagnostics> {\n  setup()\n\n  try {\n    return await getDiagnostics2(directory)\n  } catch (error) {\n    collectError(error)\n    return error\n  }\n}\n\nfunction setup(): void {\n  Telemetry.setup(\n    'https://212f65f46796440ebbe974f24b20ffae@o237831.ingest.sentry.io/5595698',\n    'typecheck',\n    version,\n    process.env.CI != null ? 1 : 0.25,\n    {\n      ci: process.env.CI,\n    },\n  )\n}\n"],"names":["resolveFrom","Path","fork","createInterface","TS","FS","glob","chalk","readline","FSP","toNormalizedPath","parseArgs","collect","collectError","cli","cli2","getDiagnostics","Telemetry"],"mappings":"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"}