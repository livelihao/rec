import{a as T,b as M,c as V,d as ee,t as te}from"./index.779df66f.js";import{f as y,c as W,a as z,b as P,l as i,q as c,t as _,x as p,y as f,T as ne,L as se,M as oe,N as j,O as U,C as h,G as k,A as g,P as x,Q as S,F as C,D as E,r as w,I as q,o as ae,E as re,R as G,H as $,S as le,n as R,U as ue,B as ce}from"./element-plus.82ea873e.js";var D=y({name:"LayoutContent",setup(){const e=T(),{getSetting:o,getTags:r}=M(),n=W(()=>e.path);let a=z({cachedViews:[...r.cachedViews]});return P(()=>r.cachedViews.length,()=>a.cachedViews=[...r.cachedViews]),{key:n,data:a,setting:o}}});const ie=e=>(j("data-v-4cba26f8"),e=e(),U(),e),de=ie(()=>h("div",null,[h("i",{class:"el-icon-caret-top"})],-1));function he(e,o,r,n,a,u){const t=i("router-view"),l=i("el-backtop"),s=i("el-scrollbar");return c(),_(s,null,{default:p(()=>[f(t,null,{default:p(({Component:d})=>[f(ne,{name:"fade-transform",mode:"out-in"},{default:p(()=>[(c(),_(se,{include:e.setting.showTags?e.data.cachedViews:[]},[(c(),_(oe(d),{key:e.key,class:"page m-3 relative"}))],1032,["include"]))]),_:2},1024)]),_:1}),f(l,{target:".layout-main-content>.el-scrollbar>.el-scrollbar__wrap",bottom:15,right:15},{default:p(()=>[de]),_:1})]),_:1})}D.render=he;D.__scopeId="data-v-4cba26f8";var X=y({name:"MenubarItem",props:{menuList:{type:Object,default:()=>({})}},setup(){return{}}});function pe(e,o,r,n,a,u){const t=i("menubar-item",!0),l=i("el-menu-item-group"),s=i("el-sub-menu"),d=i("el-menu-item");return e.menuList.children&&e.menuList.children.length>0?(c(),_(s,{key:e.menuList.path,index:e.menuList.path},{title:p(()=>[h("span",null,k(e.menuList.meta.title),1)]),default:p(()=>[f(l,null,{default:p(()=>[(c(!0),g(S,null,x(e.menuList.children,m=>(c(),_(t,{key:m.path,index:m.path,"menu-list":m},null,8,["index","menu-list"]))),128))]),_:1})]),_:1},8,["index"])):(c(),_(d,{key:e.menuList.path,index:e.menuList.path},{title:p(()=>[C(k(e.menuList.meta.title),1)]),_:1},8,["index"]))}X.render=pe;const fe=e=>{const o=r=>{let n=[];return r.filter(a=>!a.meta.hidden).forEach(a=>{let u=a.children&&a.children.filter(l=>!l.meta.hidden),t=a;!a.meta.alwaysShow&&u&&u.length===1&&([t]=u),n.push(t),t.children&&t.children.length>0&&(n[n.length-1].children=o(t.children))}),n};return o(e)};var O=y({name:"LayoutMenubar",components:{MenubarItem:X},setup(){const e=T(),o=V(),{getMenubar:r,setRoutes:n,changeCollapsed:a,getSetting:u}=M(),t=fe(r.menuList);n(t);const l=W(()=>e.meta.activeMenu?e.meta.activeMenu:e.path);return{getMenubar:r,filterMenubarData:t,activeMenu:l,onOpenChange:d=>{o.push({path:d}),r.status===2&&a()},getSetting:u}}});function me(e,o,r,n,a,u){const t=i("menubar-item"),l=i("el-menu");return c(),_(l,{mode:e.getMenubar.isPhone?"vertical":e.getSetting.mode,"default-active":e.activeMenu,collapse:e.getMenubar.status===1||e.getMenubar.status===3,class:E({"el-menu-vertical-demo":!0,"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"w-full":e.getSetting.mode==="horizontal"&&!e.getMenubar.isPhone}),"collapse-transition":!1,"unique-opened":!0,onSelect:e.onOpenChange},{default:p(()=>[(c(!0),g(S,null,x(e.filterMenubarData,s=>(c(),_(t,{key:s.path,index:s.path,"menu-list":s},null,8,["index","menu-list"]))),128))]),_:1},8,["mode","default-active","collapse","class","onSelect"])}O.render=me;var H={exports:{}};/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var o=typeof window!="undefined"&&typeof window.document!="undefined"?window.document:{},r=e.exports,n=function(){for(var t,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,d=l.length,m={};s<d;s++)if(t=l[s],t&&t[1]in o){for(s=0;s<t.length;s++)m[l[0][s]]=t[s];return m}return!1}(),a={change:n.fullscreenchange,error:n.fullscreenerror},u={request:function(t,l){return new Promise((function(s,d){var m=(function(){this.off("change",m),s()}).bind(this);this.on("change",m),t=t||o.documentElement;var b=t[n.requestFullscreen](l);b instanceof Promise&&b.then(m).catch(d)}).bind(this))},exit:function(){return new Promise((function(t,l){if(!this.isFullscreen){t();return}var s=(function(){this.off("change",s),t()}).bind(this);this.on("change",s);var d=o[n.exitFullscreen]();d instanceof Promise&&d.then(s).catch(l)}).bind(this))},toggle:function(t,l){return this.isFullscreen?this.exit():this.request(t,l)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,l){var s=a[t];s&&o.addEventListener(s,l,!1)},off:function(t,l){var s=a[t];s&&o.removeEventListener(s,l,!1)},raw:n};if(!n){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(u,{isFullscreen:{get:function(){return!!o[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return o[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!o[n.fullscreenEnabled]}}}),r?e.exports=u:window.screenfull=u})()})(H);var v=H.exports,K=y({name:"Screenfull",setup(){const e=w(!1),o=()=>{v.isEnabled?v.toggle():re({message:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F",type:"warning"})},r=()=>{v.isEnabled&&(e.value=v.isFullscreen)};return q(()=>v.isEnabled&&v.on("change",r)),ae(()=>v.isEnabled&&v.off("change",r)),{isFullscreen:e,changeScreenfull:o}}});const ge={class:"hidden-xs-only px-2"};function _e(e,o,r,n,a,u){const t=i("svg-icon");return c(),g("div",ge,[e.isFullscreen?(c(),_(t,{key:1,"class-name":"cursor-pointer","icon-class":"svg-exit-fullscreen",onClick:e.changeScreenfull},null,8,["onClick"])):(c(),_(t,{key:0,"class-name":"cursor-pointer","icon-class":"svg-fullscreen",onClick:e.changeScreenfull},null,8,["onClick"]))])}K.render=_e;const be=e=>{const o=V(),r=w(""),n=w(!1),a=w(),u=()=>{n.value=!n.value,n.value&&a.value&&a.value.focus()},t=()=>{r.value="",e.value.splice(0,e.value.length),n.value=!1};return P(n,s=>{s?document.body.addEventListener("click",t):document.body.removeEventListener("click",t)}),{href:r,changeRoute:()=>{o.push({name:"Detail",params:{id:r.value}})},changeStatus:u,isShow:n,elSelect:a,hideSearch:t}};var A=y({name:"Search",setup(){const e=w([]);return{searchList:e,searchText:async r=>{r!==""?ee.post("search_movies/",{keyword:r}).then(n=>{e.value=n.data.Data}):e.value=[]},...be(e)}}});const ve={class:"layout-navbar-search-select"};function we(e,o,r,n,a,u){const t=i("svg-icon"),l=i("el-option"),s=i("el-select");return c(),g("div",{class:E(["layout-navbar-search hidden-xs-only cursor-pointer flex flex-center px-2",{open:e.isShow}])},[f(t,{"class-name":"svg-icon","icon-class":"svg-search",onClick:G(e.changeStatus,["stop"])},null,8,["onClick"]),h("div",ve,[f(s,{ref:"elSelect",modelValue:e.href,"onUpdate:modelValue":o[0]||(o[0]=d=>e.href=d),filterable:"",placeholder:"\u641C\u7D22\u7535\u5F71...",remote:"","remote-method":e.searchText,onChange:e.changeRoute},{default:p(()=>[(c(!0),g(S,null,x(e.searchList,d=>(c(),_(l,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","onChange"])])],2)}A.render=we;A.__scopeId="data-v-e673eac8";var Q="/assets/icon.de332703.png";const ye=e=>{const o=()=>{const n=[],a=["Dashboard","RedirectPage"];return e.matched[0]&&a.includes(e.matched[0].name)||e.matched.forEach(u=>{const t={title:u.meta.title,path:u.path};n.push(t)}),n};let r=z({breadcrumbList:o()});return P(()=>e.path,()=>r.breadcrumbList=o()),{data:r}};var B=y({name:"LayoutNavbar",components:{Search:A,Screenfull:K,LayoutMenubar:O},setup(){const{getMenubar:e,getUserInfo:o,changeCollapsed:r,logout:n,getSetting:a,loginRequired:u}=M(),t=T();return{loginRequired:u,getMenubar:e,userInfo:o,changeCollapsed:r,logout:n,...ye(t),getSetting:a,icon:Q}}});const ke=e=>(j("data-v-bf2afd5c"),e=e(),U(),e),$e={key:0,class:"flex items-center px-4 flex-wrap h-12 leading-12"},Se={class:"px-4"},Me=C("\u4E3B\u9875"),Ce={key:1,class:"flex items-center px-4 flex-wrap h-12 flex-1"},Ee={class:"layout-sidebar-logo flex relative shadow-lg w-60 leading-12 items-center"},Le=["src"],Fe={key:0,class:"pl-2"},Te={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},xe={class:"flex items-center flex-row-reverse px-4 min-width-32"},Ie={class:"el-dropdown-link flex flex-center px-2"},Pe={class:"ml-2"},Ne=ke(()=>h("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),Re=C("\u4E2A\u4EBA\u4E2D\u5FC3"),Ve=C("\u524D\u5F80\u540E\u53F0"),ze=C("\u9000\u51FA\u767B\u5F55");function qe(e,o,r,n,a,u){const t=i("el-breadcrumb-item"),l=i("el-breadcrumb"),s=i("layout-menubar"),d=i("router-link"),m=i("el-dropdown-item"),b=i("el-link"),L=i("el-dropdown-menu"),N=i("el-dropdown"),I=i("Screenfull"),Z=i("Search");return c(),g(S,null,[e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(c(),g("div",$e,[h("span",{class:E(["text-2xl cursor-pointer h-12 leading-12",{"el-icon-s-fold":!e.getMenubar.status,"el-icon-s-unfold":e.getMenubar.status}]),onClick:o[0]||(o[0]=(...F)=>e.changeCollapsed&&e.changeCollapsed(...F))},null,2),h("div",Se,[f(l,{separator:"/"},{default:p(()=>[f(le,{name:"breadcrumb"},{default:p(()=>[f(t,{key:"/",to:{path:"/"}},{default:p(()=>[Me]),_:1}),(c(!0),g(S,null,x(e.data.breadcrumbList,F=>(c(),_(t,{key:F.path,to:F.path},{default:p(()=>[C(k(F.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])])):(c(),g("div",Ce,[h("div",Ee,[h("img",{class:"w-8 h-8",src:e.icon},null,8,Le),e.getMenubar.status===0||e.getMenubar.status===2?(c(),g("span",Fe,k(e.ImportMetaEnv.VITE_APP_TITLE),1)):$("",!0)]),h("div",Te,[f(s)])])),h("div",xe,[f(N,null,{dropdown:p(()=>[f(L,null,{default:p(()=>[f(m,null,{default:p(()=>[f(d,{to:"/Personal"},{default:p(()=>[Re]),_:1})]),_:1}),f(m,{divided:""},{default:p(()=>[f(b,{target:"_blank",underline:!1,href:"http://127.0.0.1:8000/admin"},{default:p(()=>[Ve]),_:1})]),_:1}),e.loginRequired?(c(),_(m,{key:0,divided:"",onClick:e.logout},{default:p(()=>[ze]),_:1},8,["onClick"])):$("",!0)]),_:1})]),default:p(()=>[h("span",Ie,[h("span",Pe,k(e.loginRequired?e.userInfo.name:"\u9009\u9879"),1),Ne])]),_:1}),f(I),f(Z)])],64)}B.render=qe;B.__scopeId="data-v-bf2afd5c";const De=()=>{const{removeOtherTagNav:e}=M(),o=T(),r=V(),n=z({left:"0px",top:"0px",display:"none"}),a=w(null);let u;const t=(d,m)=>{u=d,n.display="block",R(()=>{var I;if(!a.value)return;const b=(I=a.value)==null?void 0:I.parentNode;let L=m.clientX-b.offsetLeft-5,N=m.clientY-b.offsetTop+10;m.clientX+a.value.offsetWidth>document.body.offsetWidth&&(L=L-a.value.offsetWidth+15),n.left=`${L}px`,n.top=`${N}px`})},l=()=>{u.path===o.path?r.replace(`/redirect${u.path}`):r.push(`/redirect${u.path}`)},s=()=>e(u);return document.body.addEventListener("click",()=>n.display="none"),{menuPos:n,contextRightMenu:t,refresh:l,rightMenuEl:a,closeOther:s}},Oe=()=>{const{getTags:e}=M(),{tagsList:o,cachedViews:r}=e,n=w(null),a=w([]),u=t=>t&&a.value.push(t);return P(()=>o.length,()=>R(()=>{n.value&&(n.value.update(),R(()=>{const t=a.value.filter(s=>s).reduce((s,d)=>s+d.offsetWidth+6,0);if(!n.value)return;const l=t-n.value.wrap.offsetWidth+70;l>0&&(n.value.wrap.scrollLeft=l)}))})),ue(()=>{a.value=[]}),{tagsList:o,scrollbar:n,layoutTagsItem:a,cachedViews:r,getTagsDom:u}};var Y=y({name:"LayoutTags",setup(){const{removeAllTagNav:e,addCachedViews:o,removeTagNav:r}=M(),n=T(),a=u=>r({cPath:n.path,tagsList:u});return q(()=>{o({name:n.name,noCache:n.meta.noCache})}),{removeTag:a,removeAllTagNav:e,...Oe(),...De()}}});const Ae={class:"shadow border-b border-gray-100 px-3 overflow-hidden relative z-10"},Be={class:"layout-tags-container whitespace-nowrap"},We=["onContextmenu"],je={key:0,class:"rounded-full inline-block w-2 h-2 bg-white -ml-1 mr-1"},Ue=["onClick"];function Ge(e,o,r,n,a,u){const t=i("router-link"),l=i("el-scrollbar");return c(),g(S,null,[h("div",Ae,[f(l,{ref:"scrollbar","wrap-class":"scrollbar-wrapper"},{default:p(()=>[h("div",Be,[(c(!0),g(S,null,x(e.tagsList,s=>(c(),g("span",{key:s.path,ref:e.getTagsDom,class:E(["border border-gray-200 px-2 py-1 mx-1 cursor-pointer",{"layout-tags-active":s.isActive}]),onContextmenu:G(d=>e.contextRightMenu(s,d),["prevent"])},[s.isActive?(c(),g("i",je)):$("",!0),f(t,{to:s.path},{default:p(()=>[C(k(s.title),1)]),_:2},1032,["to"]),e.tagsList.length>1?(c(),g("i",{key:1,class:"el-icon-close text-xs hover:bg-gray-300 hover:text-white rounded-full leading-3 p-0.5 ml-1 -mr-1",onClick:d=>e.removeTag(s)},null,8,Ue)):$("",!0)],42,We))),128))])]),_:1},512)]),h("ul",{ref:"rightMenuEl",class:"border border-gray-200 absolute w-24 leading-none bg-white shadow-md rounded-lg py-0.5 z-10",style:ce(e.menuPos)},[h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:o[0]||(o[0]=(...s)=>e.refresh&&e.refresh(...s))},"\u5237\u65B0"),h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:o[1]||(o[1]=(...s)=>e.closeOther&&e.closeOther(...s))},"\u5173\u95ED\u5176\u5B83"),h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:o[2]||(o[2]=(...s)=>e.removeAllTagNav&&e.removeAllTagNav(...s))},"\u5173\u95ED\u6240\u6709")],4)],64)}Y.render=Ge;var J=y({name:"Layout",components:{LayoutContent:D,LayoutMenubar:O,LayoutNavbar:B,LayoutTags:Y},setup(){const{changeDeviceWidth:e,changeCollapsed:o,getMenubar:r,getSetting:n}=M();return q(async()=>{e();const a=te(300);let u=async function(){await a(),e()};window.addEventListener("resize",u,!0)}),{getMenubar:r,getSetting:n,changeCollapsed:o,icon:Q}}});const Xe={class:"layout flex h-screen"},He={class:"layout-sidebar-logo flex h-12 relative flex-center shadow-lg"},Ke=["src"],Qe={key:0,class:"pl-2"},Ye={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},Je={class:"layout-main flex flex-1 flex-col overflow-x-hidden overflow-y-auto"},Ze={class:"layout-main-navbar flex justify-between items-center h-12 shadow-sm overflow-hidden relative z-10"},et={key:0,class:"layout-main-tags h-8 leading-8 text-sm text-gray-600 relative"},tt={class:"layout-main-content flex-1 overflow-hidden"};function nt(e,o,r,n,a,u){const t=i("layout-menubar"),l=i("el-scrollbar"),s=i("layout-navbar"),d=i("layout-tags"),m=i("layout-content");return c(),g("div",Xe,[h("div",{class:E(["layout-sidebar-mask fixed w-screen h-screen bg-black bg-opacity-25 z-20",{hidden:e.getMenubar.status!==2}]),onClick:o[0]||(o[0]=(...b)=>e.changeCollapsed&&e.changeCollapsed(...b))},null,2),e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(c(),g("div",{key:0,class:E(["layout-sidebar flex flex-col h-screen transition-width duration-200 shadow",{"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"absolute z-30":e.getMenubar.status===2||e.getMenubar.status===3}])},[h("div",He,[h("img",{class:"w-8 h-8",src:e.icon},null,8,Ke),e.getMenubar.status===0||e.getMenubar.status===2?(c(),g("span",Qe,k(e.ImportMetaEnv.VITE_APP_TITLE),1)):$("",!0)]),h("div",Ye,[f(l,{"wrap-class":"scrollbar-wrapper"},{default:p(()=>[f(t)]),_:1})])],2)):$("",!0),h("div",Je,[h("div",Ze,[f(s)]),e.getSetting.showTags?(c(),g("div",et,[f(d)])):$("",!0),h("div",tt,[f(m)])])])}J.render=nt;J.__scopeId="data-v-d62390bc";export{J as default};
